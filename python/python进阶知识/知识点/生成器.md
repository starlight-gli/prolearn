## 生成器generator

一边循环一边计算的机制，叫做生成器

使用了yield 的函数被称之为生成器（generator）

### 生成器表达式

```
li = [i*5 for i in range (5)]#列表推导式
gen =(i*5 for i in range (5))#生成器表达式
print(li)
print(gen)  
```

### 生成器函数

python中，使用了yield关键字的函数就称之为生成器函数

yield的作用:

1. 类似return，将指定值或多个值返回给调用者

2. yield语句一次返回一个结果，在没有结果中间，挂起函数，执行next()，再重新丛挂起点继续往下执行

   ​	是函数中断，并保存中断状态

   ```python
   def test():
   	li =[]
   	li.append("a")
   	print('li:',li)
   	
   test()
   test()
   #生成器函数
   def gen():
   	print("开始了")
   	yield'a'#返回一个a，并暂停函数，在此处挂起，下一次再从此处执行
   	yield'b'
   	yield'c'
   gen_01 =gen()
   print(gen_01)
   print(next(gen_01))
   print(next(gen_01))
   
   def gen2(n):
   	li = []
   	# for i inrange(n):
       a = 0 
       while a<n:
           li.append(a)
   		yield a
           a+=1
         print("li:",li)
   print(gen2(5))
   
   for i in gen2(5):
       print(i)
   # 生成器函数
   #使用了yield关键字就是生成器函数
   def test_a():
       yield 1
       yield 2
       yield 3
   print(test_a())
   ta = test_a()
   print(next(ta))#从对象中取值
   print(next(ta))
   print(next(ta))
   print(next(test_a()))#加括号是调用函数，和函数是有区别的
   print(next(test_a()))
   ```

   #### 三者关系

   ![](https://cdn.jsdelivr.net/gh/starlight-gli/image-host/img/image-20250715172439048.png)

1. 可迭代对象，指实现了python迭代协议，可以通过for...in，循环遍历的对象，比如list、dict、str...、迭代器、生成器。
2. 迭代器，可以记住自己遍历位置的对象，只管体现就是可以使用next（）函数返回值，迭代器智能往前，不能往后。
3. 当遍历完毕之后，next()会抛出异常
4. 生成器本质上就是迭代器，就是特殊的迭代器
5. 迭代器并不一定是生成器，他是python中提供的通过简便的方法写出迭代器的一种手段
6. 包含关系，可迭代对象》迭代器》生成器
## 迭代器

### 可迭代对象Iterable

可遍历

#### 1.2 可迭代对象的条件

对象实现了`__iter__()`方法

`__iter__()`方法返回了迭代器对象

#### 1.3 for循环工作原理

`__iter__()`获取可迭代对象的迭代器

`__next__()`获取下一个值并将其赋值给临时变量i

#### 1.4`isinstance()`判断一个对象是否是可迭代对象或者是一个已知的数据类型

导入模块f collections i Iterable

```
from collections import Iterable
st = "123"
#isinstance(o,t) o,对象;t,类型，可以使直接或间接类名、基本类型或元组
print(isinstance(st,Iterable))#(int,str,dict)
print("____________________")
for i in st:
print()
```



### 2 迭代器Iterator

是一个可以记住遍历位置的对象；在上次停留的位置继续去做一些事情

```
for i in li:
	print(i)
#iter():获取可迭代对象的迭代器
#next():一个个去取元素，取完后引发一个异常

li=[]
#1.创建可迭代对象
li2= iter(li)
print(li2)
#2.获取下一条数据
print(next(li2))#1
print(next(li2))#2
print(next(li2))
print(next(li2))
print(next(li2))#5
#去完元素之后，再使用会引发StopIteration报错
print(next(li2))#报错

#步骤
#iter()调用对象的__iter__()，并把方法返回结果作为自己的返回值
#2.next()调用对象的__next__(),一个个取元素
#3.所有的元素取完后，再使用会引发StopIteration报错
```

**! 思考促进专注，也是加强记忆的重要方法，边学边思考，思考会诱发你对周围事物的接收与分析** 

#### 2.2 可迭代对象Iterable和迭代器Iterator

* ***凡是可以作用于for循环的都属于可迭代对象*** 

* ***凡是可以作用于next()的都是迭代器*** 

```
from collections.abc import Iterable.Iterator
name = "bingbing"
print(isinstance(name.Iterable))#True
print(isinstance(name.Iterable))#Falese
name2 = iter(name)
print(isinstance(name.Iterable))#True
print(isinstance(name.Iterable))#True
#迭代器对象一定是可迭代对象
#总结
#可迭代对象可以通过iter()转换成迭代器对象
#如果一个对象拥有__iter__()，是可迭代对象，如果一个对象拥有__next__()和__iter()__方法，是迭代器对象
```

 

#### 2.3 迭代器协议

对象必须提供一个next方法，执行该方法要么返回迭代中的下一项，要么就引发StopItertion异常，来中止。

#### 2.4 自定义迭代器类

* 两个特性，`__iter__()`和`__next__()`

```
class Test(object):
#初始值1，逐步递增1
	def __init__(self):
		self.num = 1
	def funa(self):
		print(self.num)
		self.num+=1
		
te =Test()

for i in range(5): 
	te.funa()
	
print(te)##not iterable

#自定义迭代器类
class MyIterator(object):
	def __init__(self):
		self.num = 0
	def __iter__(self):
		return self#返回的是当前迭代器类的实例对象
	def __next__(self):
		if self.num == 10:
			raise StopIteration("终止迭代，数据已取完")
		self.num += 1
		return self.num
		
mi =MyItorator()
print(mi)
print(next(mi))
for i in range(5):
	print(i)#死循环，无限加一
	


```



